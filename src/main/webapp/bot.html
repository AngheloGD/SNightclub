<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
        integrity="sha384-wvfXpqpZZVQGK6TAh5n0/2xXSvrM9M9sH5hZvLpzfNlAYBMwULFqNS2tMP+J5SZ6" crossorigin="anonymous">
    <link href="chat.css" rel="stylesheet" type="text/css" />
    <style>
        /* Nueva regla de estilo para la clase chat-header */
        .chat-header {
            display: flex;
            justify-content: space-between; /* Para colocar los elementos a los lados opuestos */
            align-items: center;
            padding: 10px; /* Añadido un relleno para mejorar el aspecto visual */
            border-bottom: 1px solid #ddd; /* Borde inferior para separar la cabecera del contenido */
        }

        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }

        .overlay {
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
        }

        .puppy {
            width: 600px;
            height: auto;
            animation: fadeInOut 4s ease-in-out;
        }

        @keyframes fadeInOut {
            0%,
            100% {
                opacity: 0;
            }

            10%,
            90% {
                opacity: 1;
            }
        }
    </style>
    <title>Mi Página Principal</title>
</head>

<body>
    <!-- Botón para abrir el chat y mostrar el perrito con música -->
    <button id="openChatBtn">Abrir Chat</button>

    <!-- Contenedor del chat y del perrito -->
    <div id="chat-container" style="display: none;">
        <!-- Encabezado del chat con botones para minimizar y cerrar -->
        <div class="chat-header">
            <div></div>
            <div>
                <button onclick="closeChat()" style="background: none; border: none; cursor: pointer;">
                    <img src="bot/cerca.png" alt="Cerrar" width="20">
                </button>
            </div>
        </div>
        <audio autoplay>
            <source src="bot/bot.mp3" type="audio/mpeg">
            Your browser does not support the <code>audio</code> tag.
        </audio>
        <!-- Área del chat -->
        <div id="chatbox"></div>
        <!-- Campo de entrada del usuario y botón de enviar -->
        <div style="display: flex; align-items: center;">
            <input type="text" id="userInput" placeholder="Escribe tu mensaje..."
                style="flex: 1; padding: 8px; border: none; border-top: 1px solid #ddd; box-sizing: border-box; outline: none; margin: 10px;"
                onkeydown="if(event.keyCode==13) sendMessage();">
            <button id="sendBtn" onclick="sendMessage()" style="background: none; border: none; cursor: pointer;">
                <img src="bot/enviar-mensaje.png" alt="Enviar mensaje" width="20">
            </button>
        </div>
    </div>

    <!-- Contenedor del perrito y audio -->
    <div id="puppyContainer" class="overlay" style="display: none;">
        <img id="puppy" class="puppy" src="bot/bott.gif" alt="Perrito en movimiento">
        <audio id="welcomeAudio">
            <source src="bot/bot.mp3" type="audio/mpeg">
        </audio>
    </div>

    <!-- Script para abrir y cerrar el chat y mostrar el perrito -->
    <script>
        var chatContainer = document.getElementById('chat-container');
        var openChatBtn = document.getElementById('openChatBtn');

        openChatBtn.addEventListener('click', function () {
            showPuppyAndPlayAudio(); // Mostrar perrito y reproducir audio al abrir el chat
            setTimeout(function () {
                hidePuppy();
                chatContainer.style.display = 'flex'; // Mostrar el chat después de la animación del gif
            }, 4000);
        });

        function minimizeChat() {
            chatContainer.style.display = 'none'; // Oculta el chat pero mantiene la visibilidad
        }

        function closeChat() {
            chatContainer.style.display = 'none'; // Oculta y borra el chat
        }

        function sendMessage() {
            var userInput = document.getElementById('userInput').value;
            var chatbox = document.getElementById('chatbox');

            // Mostrar el mensaje del usuario en el chatbox
            chatbox.innerHTML += '<p><strong>Tú:</strong> ' + userInput + '</p>';

            // Simular respuesta del chatbot (puedes personalizar esto)
            var botResponse = "¡Hola! Soy un Anghelo el Administrador del Sistema. Gracias por tu mensaje: '" + userInput + "'";
            chatbox.innerHTML += '<p><strong>Chatbot:</strong> ' + botResponse + '</p>';

            // Limpiar el campo de entrada
            document.getElementById('userInput').value = '';

            // Hacer scroll hacia abajo para mostrar el último mensaje
            chatbox.scrollTop = chatbox.scrollHeight;
        }

        function showPuppyAndPlayAudio() {
            var puppyContainer = document.getElementById('puppyContainer');
            var welcomeAudio = document.getElementById('welcomeAudio');

            // Muestra la imagen del perrito
            puppyContainer.style.display = 'flex';

            // Reproduce el audio
            welcomeAudio.play();
        }

        function hidePuppy() {
            var puppyContainer = document.getElementById('puppyContainer');

            // Oculta la imagen del perrito
            puppyContainer.style.display = 'none';
        }
    </script>
</body>

</html>
